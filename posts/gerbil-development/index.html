
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Setting up a development environment for Gerbil Scheme and Doom Emacs &#8212; logc.net  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/library/library.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="author" title="About these documents" href="../../about/" />
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" /> 
 

<link rel="stylesheet" id="sphinx-library-type" href="../../_static/library/type-engineer.css" type="text/css" />
<link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
<meta name="viewport" content="width=device-width, initial-scale=0.9" />
<script>
  mobile_menu_content = "";
  function toggleMenu() {
    var div = document.getElementsByClassName("document").item(0);
    var btn = document.getElementById("menu-toggler");
    if(div.classList.contains("mobile-show")) {
      div.classList.remove("mobile-show");
      btn.innerHTML = mobile_menu_content;
    }
    else {
      div.classList.add("mobile-show");
      mobile_menu_content = btn.innerHTML;
      btn.innerHTML = btn.getAttribute("data-open");
    }
  }
</script> 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../blog/atom.xml"
  title="Telling rocks what to think"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
<body class="light">
<div class="document">

  
  <nav class="mobile-menu" role="navigation">
    
  <button type="button" id="menu-toggler" onclick="toggleMenu();"
    data-open="× Close">≡ Menu</button>
  <a href="../../">logc.net</a>
  <noscript>
    <div>
      JavaScript is required to open/close mobile menu.
    </div>
  </noscript>
  </nav>
  

  
  <nav class="sphinxsidebar" role="navigation" aria-label="main navigation">
    


<h1 class="logo ">
  <a href="../../">logc.net</a>
</h1>



<p class="description">Telling rocks what to think</p>


  
<h2>
   
  04 December 2020 
</h2>

<ul>
   
<li id="author">
  <span
    >Author:</span
  >
   
  <a href="../../blog/author/luis-osa/">Luis Osa</a>  
</li>
    
<li id="tags">
  <span
    >Tags: </span
  >
   
  <a href="../../blog/tag/scheme/">scheme</a>   
  <a href="../../blog/tag/emacs/">emacs</a>  
</li>
 
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<h3>
  <a href="../../blog/">Recent Posts</a>
</h3>
<ul>
   
  <li>
    <a href="../sbt-plugin/"
      >24 November - Creating SBT plugins</a
    >
  </li>
  
  <li>
    <a href="../deploy-blog/"
      >20 November - How is this blog deployed</a
    >
  </li>
  
  <li>
    <a href="../blog-setup/"
      >08 November - Blog Setup</a
    >
  </li>
  
</ul>

<h3><a href="../../blog/tag/">Tags</a></h3>
<style type="text/css">
  ul.ablog-cloud {
    list-style: none;
    overflow: auto;
  }
  ul.ablog-cloud li {
    float: left;
    height: 20pt;
    line-height: 18pt;
    margin-right: 5px;
  }
  ul.ablog-cloud a {
    text-decoration: none;
    vertical-align: middle;
  }
  li.ablog-cloud-1 {
    font-size: 80%;
  }
  li.ablog-cloud-2 {
    font-size: 95%;
  }
  li.ablog-cloud-3 {
    font-size: 110%;
  }
  li.ablog-cloud-4 {
    font-size: 125%;
  }
  li.ablog-cloud-5 {
    font-size: 140%;
  }
</style>
<ul class="ablog-cloud">
   
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/build/">build</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/emacs/">emacs</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="../../blog/tag/meta/">meta</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/sbt/">sbt</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/scala/">scala</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/scheme/">scheme</a>
  </li>
   
</ul>

<h3>
  <a href="../../blog/archive/">Archives</a>
</h3>
<ul>
   
  <li>
    <a href="../../blog/2020/">2020 (4)</a>
  </li>
   
</ul>
<script>
  function toggleMode(theme) {
    document.body.className = theme;
    localStorage.setItem("sphinx-library-mode", theme);
  }
  var theme = localStorage.getItem("sphinx-library-mode");
  if(theme !== null)
    toggleMode(theme);
</script>
<h3>Reading Mode</h3>

<button type="button" onclick="toggleMode('light');">Light</button>
<button type="button" onclick="toggleMode('sepia');">Sepia</button>
<button type="button" onclick="toggleMode('dark');">Dark</button>

<noscript>
  <div>
    JavaScript is required to toggle reading modes.
  </div>
</noscript>
  </nav>
  <div class="documentwrapper">
    

    <main class="body" role="main" id="main">
       <div class="section" id="setting-up-a-development-environment-for-gerbil-scheme-and-doom-emacs">
<h1>Setting up a development environment for Gerbil Scheme and Doom Emacs<a class="headerlink" href="#setting-up-a-development-environment-for-gerbil-scheme-and-doom-emacs" title="Permalink to this headline">¶</a></h1>
<p>There is an <a class="reference external" href="https://cons.io/guide/">installation guide</a> and a <a class="reference external" href="https://cons.io/guide/emacs.html">page</a> about development with Emacs in the
Gerbil Scheme website, but I felt it was centered on plain Emacs and not on
variants like Doom Emacs – which is fine, of course, I just happen to prefer Doom
because it has a focus on Vim keybindings and I am much more used to them than
to plain Emacs chords.</p>
<div class="section" id="install-gerbil">
<h2>Install Gerbil<a class="headerlink" href="#install-gerbil" title="Permalink to this headline">¶</a></h2>
<p>This one is easy: use the Hombrew formula. It also pulls in the underlying
Gambit Scheme dependency.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> brew install gerbil-scheme
</pre></div>
</div>
</div>
<div class="section" id="install-gerbil-mode-and-gambit-mode">
<h2>Install <code class="docutils literal notranslate"><span class="pre">gerbil-mode</span></code> and <code class="docutils literal notranslate"><span class="pre">gambit-mode</span></code><a class="headerlink" href="#install-gerbil-mode-and-gambit-mode" title="Permalink to this headline">¶</a></h2>
<p>Both Gerbil and Gambit offer Emacs support as single Elisp files that live
inside their respective project directory tree. They intend these files to be
copied or symlinked into <code class="docutils literal notranslate"><span class="pre">~/.emacs.d</span></code> and required in <code class="docutils literal notranslate"><span class="pre">.emacs</span></code>.</p>
<p>I found it easier to install them as “Github recipes” with Doom’s <code class="docutils literal notranslate"><span class="pre">package!</span></code>
macro.</p>
<p>Within <code class="docutils literal notranslate"><span class="pre">.doom.d/packages.el</span></code>, add:</p>
<div class="highlight-elisp notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">package!</span> <span class="nv">gerbil-mode</span>
  <span class="nb">:recipe</span> <span class="p">(</span><span class="nb">:host</span> <span class="nv">github</span> <span class="nb">:repo</span> <span class="s">&quot;vyzo/gerbil&quot;</span>
           <span class="nb">:files</span> <span class="p">(</span><span class="s">&quot;etc/gerbil-mode.el&quot;</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">package!</span> <span class="nv">gambit-mode</span>
  <span class="nb">:recipe</span> <span class="p">(</span><span class="nb">:host</span> <span class="nv">github</span> <span class="nb">:repo</span> <span class="s">&quot;gambit/gambit&quot;</span>
           <span class="nb">:files</span> <span class="p">(</span><span class="s">&quot;misc/gambit.el&quot;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="section" id="configure-the-new-modes">
<h2>Configure the new modes<a class="headerlink" href="#configure-the-new-modes" title="Permalink to this headline">¶</a></h2>
<p>There is a full example of a <code class="docutils literal notranslate"><span class="pre">use-package</span></code> configuration in the page linked
above from Gerbil’s documentation. I have adapted it to configure separately
both modes, only taking the minimal required setups.</p>
<p>Within <code class="docutils literal notranslate"><span class="pre">.doom.d/config.el</span></code>, add:</p>
<div class="highlight-elisp notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">use-package</span> <span class="nv">gambit-mode</span>
  <span class="nb">:defer</span> <span class="no">t</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;inferior-scheme-mode-hook</span> <span class="ss">&#39;gambit-inferior-mode</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">gerbil-mode</span>
  <span class="nb">:defer</span> <span class="no">t</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="k">defvar</span> <span class="nv">gerbil-program-name</span>
    <span class="c1">;; depending on your env setup, this can probably be just &quot;gxi&quot;</span>
    <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;/usr/local/bin/gxi&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">scheme-program-name</span> <span class="nv">gerbil-program-name</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="redefine-key-bindings">
<h2>Redefine key bindings<a class="headerlink" href="#redefine-key-bindings" title="Permalink to this headline">¶</a></h2>
<p>Most of the useful key bindings that Gerbil-mode and Gambit-mode expose are
behind a “C-c” prefix. In Doom, hitting that key chord with a Schme file open
(file extension “.scm” or “.ss”) will show all available key bindings on a
<code class="docutils literal notranslate"><span class="pre">which-key</span></code> minibuffer. I have redfined some of them to be also available under
the local leader key, which is defined elsewhere in my config to <code class="docutils literal notranslate"><span class="pre">,</span></code>.</p>
<p>Within <code class="docutils literal notranslate"><span class="pre">.doom.d/config.el</span></code>, add:</p>
<div class="highlight-elisp notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">after!</span> <span class="nv">gerbil-mode</span>
  <span class="p">(</span><span class="nv">map!</span> <span class="nb">:map</span> <span class="nv">gerbil-mode-map</span>
        <span class="nb">:localleader</span> <span class="nb">:desc</span> <span class="s">&quot;Run Scheme shell&quot;</span>
        <span class="s">&quot;&#39;&quot;</span> <span class="p">(</span><span class="nv">cmd!</span> <span class="p">(</span><span class="nv">pop-to-buffer</span> <span class="s">&quot;*scheme*&quot;</span><span class="p">)</span>
                  <span class="p">(</span><span class="nv">run-scheme</span> <span class="nv">scheme-program-name</span><span class="p">))</span>
        <span class="s">&quot;,&quot;</span> <span class="nf">#&#39;</span><span class="nv">scheme-send-region</span>
        <span class="s">&quot;e&quot;</span> <span class="nf">#&#39;</span><span class="nv">scheme-send-definition</span>
        <span class="s">&quot;E&quot;</span> <span class="nf">#&#39;</span><span class="nv">scheme-send-definition-and-go</span>
        <span class="s">&quot;l&quot;</span> <span class="nf">#&#39;</span><span class="nv">scheme-load-file</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>

<div class="section">
     
<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="../sbt-plugin/">
       Creating SBT plugins
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
    
  </span>
</div>
  
</div>

    </main>
    <nav class="related bottom" role="navigation">
  <div class="clear"></div>
    </nav>
    

  </div>

  <div class="clear"></div>
</div>
<footer class="footer" role="contentinfo">
    &copy; Copyright 2020, Luis Osa.
  
  Created using <a href="http://sphinx-doc.org/">Sphinx</a> with
  <a href="https://github.com/vsalvino/sphinx-library">Library</a> theme.
  
  <a href="../../_sources/posts/gerbil-development.rst.txt" rel="nofollow">Page source</a>
</footer>
  </body>
</html>